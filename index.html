<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç¿»ç‰Œè¨˜æ†¶éŠæˆ²</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f2f2f2; }
    h1 { color: #333; }
    #game-board { display: grid; grid-template-columns: repeat(4, 120px); grid-gap: 10px; justify-content: center; margin-top: 20px; }
    .card {
      width: 120px; height: 80px; background: #4caf50; color: white;
      display: flex; justify-content: center; align-items: center;
      font-size: 18px; cursor: pointer; border-radius: 8px;
    }
    .flipped, .matched { background: #fff; color: #333; cursor: default; }
    #status { margin-top: 20px; font-size: 18px; }
    #next-level { margin-top: 20px; display: none; }
  </style>
</head>
<body>
  <h1>ç¿»ç‰Œè¨˜æ†¶éŠæˆ²</h1>
  <div id="game-board"></div>
  <div id="status"></div>
  <button id="next-level">é€²å…¥ä¸‹ä¸€é—œ</button>

  <script>
    const wordPairs = [
      ["dove","é´¿å­"], ["robin","çŸ¥æ›´é³¥"], ["consider","è€ƒæ…®"], ["woodpecker","å•„æœ¨é³¥"],
      ["ruling","çµ±æ²»çš„"], ["family","å®¶åº­"], ["scorn","è¼•è”‘"], ["associated","æœ‰é—œçš„"],
      ["officially","å®˜æ–¹åœ°"], ["mutually","äº’ç›¸åœ°"], ["eventually","æœ€çµ‚"], ["martial","æ­¦è¡“çš„"],
      ["mind-body","èº«å¿ƒçš„"], ["gain","ç²å¾—"], ["aspect","æ–¹é¢"], ["poetic","è©©æ„çš„"],
      ["vital force","ç”Ÿå‘½åŠ›"], ["noticeable","é¡¯è‘—çš„"], ["effortlessly","è¼•è€Œæ˜“èˆ‰åœ°"], ["cultivation","åŸ¹é¤Š"],
      ["domesticated","é¦´åŒ–çš„"], ["colonist","æ®–æ°‘è€…"], ["multimillion","æ•¸ç™¾è¬çš„"], ["generate","ç”¢ç”Ÿ"],
      ["ancestor","ç¥–å…ˆ"], ["bark","æ¨¹çš®/ç‹—å«è²"]
    ];

    let currentLevel = 0;
    const cardsPerLevel = 8; // æ¯é—œ 8 çµ„
    let board = document.getElementById("game-board");
    let status = document.getElementById("status");
    let nextBtn = document.getElementById("next-level");

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function loadLevel(level) {
      board.innerHTML = "";
      status.textContent = `ç¬¬ ${level+1} é—œ`;
      nextBtn.style.display = "none";

      let start = level * cardsPerLevel;
      let end = start + cardsPerLevel;
      let pairs = wordPairs.slice(start, end);

      if (pairs.length === 0) {
        status.textContent = "ğŸ‰ æ­å–œå®Œæˆå…¨éƒ¨é—œå¡ï¼";
        return;
      }

      let cards = [];
      pairs.forEach(([en, zh]) => {
        cards.push({ text: en, pair: en });
        cards.push({ text: zh, pair: en });
      });

      shuffle(cards);

      cards.forEach((card, idx) => {
        let div = document.createElement("div");
        div.className = "card";
        div.dataset.pair = card.pair;
        div.dataset.index = idx;
        div.textContent = "";
        div.addEventListener("click", () => flipCard(div, card.text));
        board.appendChild(div);
      });
    }

    let firstCard = null;
    function flipCard(cardDiv, text) {
      if (cardDiv.classList.contains("flipped") || cardDiv.classList.contains("matched")) return;

      cardDiv.textContent = text;
      cardDiv.classList.add("flipped");

      if (!firstCard) {
        firstCard = cardDiv;
      } else {
        if (firstCard.dataset.pair === cardDiv.dataset.pair) {
          firstCard.classList.add("matched");
          cardDiv.classList.add("matched");
          firstCard = null;
          checkLevelComplete();
        } else {
          setTimeout(() => {
            firstCard.textContent = "";
            cardDiv.textContent = "";
            firstCard.classList.remove("flipped");
            cardDiv.classList.remove("flipped");
            firstCard = null;
          }, 800);
        }
      }
    }

    function checkLevelComplete() {
      let unmatched = document.querySelectorAll(".card:not(.matched)");
      if (unmatched.length === 0) {
        status.textContent = `ç¬¬ ${currentLevel+1} é—œå®Œæˆï¼`;
        nextBtn.style.display = "inline-block";
      }
    }

    nextBtn.addEventListener("click", () => {
      currentLevel++;
      loadLevel(currentLevel);
    });

    loadLevel(currentLevel);
  </script>
</body>
</html>
